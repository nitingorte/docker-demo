node {
  stage('SCM') {
    checkout scm
  }
  stage('SonarQube Analysis') {
    def mvnHome = tool 'maven3';
    withSonarQubeEnv('your-sonarqube-server-id') {
      script {
        // Provide the full path to the sonar.java.binaries property
        def sonarScannerCmd = "${mvnHome}/bin/mvn clean verify sonar:sonar " +
                             "-Dsonar.projectKey=rest-docker-demo " +
                             "-Dsonar.projectName='rest-docker-demo' " +
                             "-Dsonar.java.binaries=${WORKSPACE}/target/classes"
        sh sonarScannerCmd
      }
    }
  }
}
